---
lab:
    title: '課題 01: Dynamics 365 Marketing の探索'
    module: 'モジュール 04: Dynamics 365 Marketing の概要'
---

# MB-901: Dynamics 365 の基礎 
## モジュール 4、ラボ 1 - Dynamics 365 Marketing について

**前提条件:** この実習の手順を実行する前に、次のタスクを実行します。 
1. **マーケティング** > **ファイル**に移動します。
1. **「新規」** をクリックします。
1. **条件を追加** をクリックします。
1. デスクトップから少なくとも 1 つの画像をアップロードします。
1. 「**アップロード**」 をクリックします。
1. アップロードが完了したら、「**完了**」 をクリックします。

### 顧客との関係を深めるメールを作成する

1. **マーケティング** > **マーケティング メール**に移動します。現在のマーケティング メールの一覧が表示されます。コマンド バーで 「**新規**」 を選択します。
1. 「**マーケティング電子メール テンプレート**」 ダイアログ ボックスが開きます。この演習では、「**スキップ**」 を選択して、必要なすべてのコンテンツをステップ実行できるように、空白テンプレートから開始します。**ヒント:** すぐに使える標準テンプレートが用意されており、組織のグラフィカルな ID、必要な要素、およびメッセージングの標準運用方法を含む独自のテンプレートを作成することもできます。詳しくはこちらまで: https://docs.microsoft.com/dynamics365/marketing/create-templates) 
これで、「**新しいマーケティング電子メール**」 ページが開きます。 
1. 右上隅の 「**名前**」 フィールドと 「**ステータス**」 フィールドの横にあるドロップダウンから、下矢印を選択してドロップダウン ダイアログを開き、新規メッセージの 「**名前**」 を入力します。
1. メッセージの**件名**を入力します。これは、受信者が電子メールを受信したときに最初に表示されるものであり、メッセージを読むかどうかを判断するためにこれを使用する可能性があるため、非常に重要な設定です。
1. ページのメイン部分にデザインキャンバス(左側)が表示されます。ここでは、コンテンツのドラッグ、配置、入力ができます。白紙のテンプレートを選択したため、デザインには 1 列しかないセクション (レイアウト) 要素があるだけで、何も情報が入っていない状態です。 
1. ページの右側にある **ツールボックス**には、メッセージの作成に使用するデザイン要素が備わっています。「**ツールボックス**」 タブから、**テキスト**要素をセクション要素の内側に向けてドラッグします。要素を適切な位置にドラッグすると、青色の領域が表示されます。マウス ボタンを放すと、その場所に要素がドロップされます。
1. テキスト要素をドロップすると、要素内にプレースホルダー テキストが表示され、そのすぐ下または上に浮動ツールバーが表示されます。
1. プレースホルダー テキストを選択して削除し、任意のテキストを追加します。ツールバー ボタンを使用して、Microsoft Word のようなテキスト エディタの場合と同じような操作性でテキストのスタイルを設定します (ツールバーのボタンをポイントすると、その動作がわかります)。ほとんどのボタンはテキストや段落のスタイル設定用ですが、リンクを作成するためのボタンもあります。ダイナミック テキストの入力 (詳細は後に説明します) や、テキスト要素全体を移動、コピー、または削除します。**ヒント:** ほとんどの電子メール クライアントでは、受信トレイ リストのメッセージのプレビュー テキストとして表示されるため、ページに最初に入力するテキストは特に重要です。Outlook でどのように見えるかは次のとおりです。
1. メッセージをカスタマイズする簡単な方法は、挨拶文に受信者の名前を含める方法です。**編集の支援 </>** 機能を使用して、受信者の名前を動的テキストとして追加します。
    - 追加したテキスト要素で作業し、「相手の敬称」といった適切なトーンで文章を始めます。
    - ツール バーのアップロードで、「編集支援」 ボタンをクリックします。これにより、編集支援ダイアログが開きます。
    - **注:** 編集支援ボタンを使うと、有効な動的式を作成して、受信者の連絡先レコード、メッセージのコンテンツ設定、その他のデータベース値からフィールド値を配置できます。このボタンは、グラフィック デザイナーでテキスト要素を選択するたびに、テキスト書式設定ツール バーに表示されます。このボタンは、件名、送信元アドレス、送信者名フィールドなど、一部の設定フィールドにも表示されます。
  - ラジオ ボタンで 「**動的コンテンツ**」 を選択し、コンボ ボックスからは 「**連絡先**」 を選択します。**動的** 設定は、メッセージを使用するコンテキストに関連する動的な値を配置することを意味し、**連絡先**設定は、コンテキストがメッセージの個々の受信者 (連絡先) に関連付けられていることを意味します。
  - 「**関連なし**」 を選択します。
  - 前のページで、取引先担当者設定エンティティを選択します (コンテキスト内)。このページでは、そのエンティティから配置するフィールドを選択する必要があります。私たちはあいさつ文を構築しているので、ここで受取人の名前を表示したいと思います。「**フィールドの選択**」 ラジオ ボタンを選択し、ここのコンボ ボックスに「名前」を入力します。これにより、「名前」というテキストを含むフィールドが検索され、検索する必要があるフィールドの数が大幅に減少します。表示されたらすぐに、リストから**名前**を選択します。 
  - 「**挿入**」 を選択して、作成した式を配置し、編集支援ツールを閉じます。完全な挨拶は次のようになります: **{{contact.firstname}}様、**。  **ヒント:** **件名**フィールドにも編集支援ボタンがあることがわかります。つまり、件名に動的テキスト (受信者の名前を含む) を入れることもできます。
11.	すべてのメール メッセージの本文には、サブスクリプション センターへのリンクと組織の住所を含める必要があります。これらは多くの管轄区域で法律で義務付けられており、**Dynamics 365 Marketing** では、それらを持たないマーケティング メールを公開することはできません。次のように、編集支援を使用して配置します。
  - **アドレス**に適した場所を選択し、編集支援を使用して配置します。編集支援ツールの最初のページで 「**動的**」 を選択し、「**エンティティを選択**」 を選択します。「**連絡先**」 を選択し、「**リレーションシップなし**」 を選択します。2 ページ目の 「**フィールドの選択**」 と 「**アドレス 1**」 の場合。「**挿入**」 を選択して、{{msdyncrm_contentsettings.msdyncrm_addressmain}} という式をメッセージに配置します。
  - サブスクリプションセンター リンクに適した場所を選択し、そこにいくつかのアンカー テキスト (「サブスクリプションの管理」など) を入力します。アンカー テキストを選択し、フローティング ツールバーから 「**リンク**」 ボタンを選択すると、「**リンク**」 ダイアログ ボックスが開きます。「**リンク**」 フィールドの 「**編集の支援**」 ボタンを選択します。編集支援ダイアログで、最初のページで 「**動的**」 を選択し、「**コンテンツの設定**」 を選択します。「**リレーションシップなし**」 を選択します。選択フィールドの場合は、2 ページ目の**サブスクリプションセンター**を選択します。 
  - 「**挿入**」 を選択して、式 {{msdyncrm_contentsettings.msdyncrm_subscriptioncenter}} を 「**リンク**」 フィールドに配置します。「**OK**」 を選択します。
12. 通常、Dynamics 365 Marketing がメッセージを開いたイベントをログに記録するために必要な画像を読み込む受信者を招待するため、デザインに少なくとも 1 つの表示イメージを含める必要があります。**ツールボックス**からキャンバスに**イメージ**要素をドラッグします。今回は、要素をドロップすると、イメージ プレースホルダーと 「**プロパティ**」 タブが表示され、選択した要素の構成設定が表示されます。
13. 「**プロパティ**」 タブで、「**ソース**」 フィールドの右側にある 「**イメージ ギャラリー**」 ボタンを選択します。「**ファイルの選択**」 ダイアログ ボックスが開きます。ここには、Dynamics 365 Marketing サーバーにアップロード済みのすべての画像を表示できます。画像を選択し、「**選択**」 を選択して、メッセージ デザインに配置します。(画像が表示されない場合は、「アップロード」 を選択して新しい画像を追加します)。    
- **ヒント:** メッセージがライブになると、**Dynamics 365 Marketing** は、関連するすべての画像をライブラリからコンテンツ配信ネットワークにアップロードし、すべての受信者に対して単一のソースとして使用できるようになります。画像は各メッセージに添付されるのではなく、追跡のために **Dynamics 365 Marketing** を介してリダイレクトされるリンクとして含まれます。受信者がメッセージを開くまで画像はダウンロードされないので、送信者と受信者の両方が帯域幅を節約できます。受信者の電子メール クライアントが画像を要求すると、 **Dynamics 365 Marketing** はメッセージが開封されたこととメッセージを開封した受信者を認識します。
1. メッセージに最小限必要なコンテンツと推奨されるコンテンツがすべて含まれるようになりました。**「プレビュー」** タブに移動して、さまざまな画面サイズでレンダリングされる方法と動的コンテンツがどのように解決されるかを概算して確認します。左端の列のボタンを使用して、プレビューする画面サイズと向きを選択します。**「プロパティ」** 列の **「連絡先」** フィールドと  **「コンテンツの設定」** フィールドを使用して、さまざまな受信者と設定に対する動的コンテンツの解決方法を確認します。
1. メッセージに必要なすべてのコンテンツが含まれ、送信する準備ができていることを確認するには、コマンド バーの **「エラーの確認」** を選択します。Dynamics 365 Marketing はメッセージをチェックし、ページの上部にある通知バーに結果を表示します。複数のエラーが見つかった場合は、展開ボタンを選び、すべてのエラーを表示します。この手順に従うと、メッセージは、エラー チェックに成功します。表示されない場合は、エラー メッセージを読み、報告された問題を修正し、エラーチェック結果に成功するまで繰り返してください。
1. これまでは、プレビューとエラーチェックがシミュレートされていました。最終のテストでは、メッセージを自分宛に送信された後、メーラーで結果が精査されます。コマンド バーで 「**テストを送信する**」 を選択します。**クイック作成**フォームは、横方向にスライドします。表示されるフィールドに自分の**メール アドレス**を入力し、  動的コンテンツを解決するときに使用する 「**テストの連絡先**」 レコードと 「**テスト コンテンツの設定**」 レコードを選択します (これらは、シミュレートされたプレビューの場合と同じです)。**保存**を選択して、自分宛にメッセージを送信します。受信には数分かかります。
1. 受信トレイに受信したメッセージを開いた時に、メッセージが正常に表示されれば、コマンド バーで 「**ライブに移行する**」 を選択して公開 することができます。**Dynamics 365 Marketing** は、デザインを電子メール マーケティング サービスにコピーし、顧客体験でメッセージを使用できるようにします (ただし、まだメッセージは配信されません)。また、ライブ移行プロセスは動的コードをアクティブ化し、リンクを **Dynamics 365 Marketing** を介してリダイレクトされる追跡可能なバージョンに置き換えます (これは受信者を識別し、クリックを記録します)。最後に、メッセージ の**ステータス**が 「ライブ」 に更新されます。
  - **ヒント:** ライブ状態のメッセージは、Dynamics 365 Marketing で編集できないようにロックされます。ライブ メッセージを編集する必要がある場合は、まず Dynamics 365 マーケティングで開き、 コマンド バーで 「**非アクティブ化**」 を選択する必要があります。
  
### ターゲット層を特定する

**シナリオ:** セグメントのコレクションを設定する必要があります。これは、特定の顧客のグループの表現に既に使用しているキーワードに近いものを使用して定義します。 
次に、これらのセグメントを使用して、電子メール マーケティング キャンペーンや顧客体験などのマーケティング イニシアチブをターゲットにします。このようなセグメントは、一連のルールと条件を使用して自分で定義することができ、動的セグメントと呼ばれます。それは、このセグメントの各定義事項は、データベースの情報に基づいて、絶え間なく、そして、自動的に変化するからです。注: 静的セグメントは、一度に 1 つずつ、明示的に連絡先を追加することによって設定されます。

1. **マーケティング** > **連絡先に移動**します。これにより、現在の連絡先の一覧が表示されます。コマンド バーで 「**新規**」 を選択します。
1. 「**新しい連絡先**」 ページが開きます。次のフィールドに情報を入力します。
 - **名:** 架空の名を入力します。
 - **姓:** 架空の姓を入力します。
 - **電子メール:** 自分のメールアドレス (またはメールを受信できるメールアドレス) を入力します。
 - **住所 1: 市町村:** 架空の都市を入力します (この例では**アトランティス**を使用します)。これにより、架空の連絡先のみを含むセグメントを簡単に作成できます。 
1. コマンド バーで、「**保存して終了する**」 を選択します。
1. 作成済み連絡先と似たような情報で 2 つ目の連絡先を作成します。同じメール アドレスと架空の都市を使用しますが、姓と名を変えます。
1. コマンド バーで、「**保存して終了する**」 を選択します。
1. 「**顧客**」 > 「**セグメント**」 に移動します。これにより、既存のセグメントのリストが表示されます。コマンド バーで 「**新規サポート案件**」を選択します。
1. セグメント テンプレートを選択できるポップアップ画面が表示されます。「**スキップ**」 をクリックします。
1. 「**新しいセグメント**」 ページが開きます。
1. **Dynamics 365 Marketing** は、ターゲット情報セグメントを作成します。この時、取引先担当者エンティティに対するクエリは既に含まれています。クエリ ブロックの 一番上にあるドロップダウン リストに表示される値を確認すると、クエリ対象の**取引先担当者**エンティティを確認できます。 
1. 現在、セグメントにはフィルタ (条件行) が含まれず、データベース内のすべての連絡先が検索されます。しかし、作成した新しいテスト連絡先だけを見つけたいので、フィルターを追加しましょう。
1. 「**属性の選択**」 フィールドでは、取引先担当者エンティティで使用できる、すべての属性を示すドロップダウン リストが表示されます。次に「city」と入力してリストをフィルタリングし、リストから **住所 1: City**」 を選択します。
1. 2 つの新しいドロップダウン リストが行に追加されました。次のドロップダウン リストは 「**Equals**」 に設定したままにします。これは、 <328>**取引先担当者**</328>エンティティの 「**アドレス 1: City**」 フィールドで、値をテストする方法を定義する演算子です。その他の演算子には **Contains**、**Begins with**、**Contains data** などがあり、使用している値のタイプ (文字列、数値、日付など) に応じて異なります。
1. ゴースト テキスト 「**テキストを入力**」 を含んだ 3 番目のドロップダウン リストを選択し、テストの取引先担当者用に選択した架空の都市名を入力します (「アトランティス」などと選択したかも知れません)。
1. クエリの上部にある、ゴースト テスト 「**セグメント名を入力**」 を含んだフィールドを選択して、セグメントの名前 (「アトランティスの連絡先」など) を入力します。
1. コマンド バーで 「**保存**」 を選択してセグメントを保存し、「**稼働する**」 を選択 してセグメントを発行します。保存しても、稼働させるまでは、そのセグメントを顧客体験で使用することはできません。Dynamics 365 Marketing がセグメントにエラーがないかチェックし、問題を検出したら報告します。エラーが報告された場合は、修正してもう一度試してください。エラーが見つからなければ、セグメントはマーケティング サービスにコピーされ、顧客体験で使用できるようになります。
1. 1 分ほど待ってから、コマンド バーの 「**最新の情報に更新**」 を選択してページを更新します。「**メンバー**」 タブが追加されたことが確認できます。表示されない場合は、もう少し待ってから、表示されるまで 「**更新**」 をもう一度試してください。「**メンバー**」 タブが表示されたら、それを開き、先ほど追加した 2 つの架空の連絡先がセグメントに含まれていることを確認してください。

### キャンペーンの作成 

**シナリオ:** 1 回限りのメール配信を実行する顧客体験を作成する必要があります。

1. 「**マーケティング実行**」 > 「**顧客体験**」 へ移動します。既存の顧客体験のリストが表示されます。コマンド バーで 「**新規**」 を選択します。
1. 「**新しい顧客体験**」 ページが開き、「**顧客体験テンプレートの選択**」 ダイアログ ボックスが表示されます。「**スキップ**」 を選択し、「**選択**」 を選択します。ダイアログ ボックスが閉じ、選択したテンプレートが新しい体験にコピーされます。
1. 顧客体験デザイナーが表示されています。ここで体験の各手順を定義するパイプラインを組み立てます。どの体験でも参加者から始めます。このケースでは、市場セグメントの一部として指定する人々です。「**セグメント**」 タイルを 「**ツールボックス**」 タブからパイプラインの最初の位置にドラッグします。
1. 新しい 「**セグメント グループ**」 タイルの右下隅にある展開ボタンを選択して、このグループのメンバー セグメントを表示します。今のところ 1 つだけあり、それを選択してください。
1. ネストされたセグメントを選択したまま、キャンバスの右側にある 「**プロパティ**」 タブを開きます。「**プロパティ**」 タブには、選択したタイルに適用される設定が表示されます。「**セグメント**」 を、キャンペーンでターゲットにしたいセグメントの名前に設定します。
1. 「**ツールボックス**」 タブに戻り、「**電子メール メッセージ マーケティング**」 タイルを 「**セグメント グループ**」 タイルのすぐ右側の領域にドラッグします。
1. 新しい 「**電子メール**」 タイルが選択されたまま、「**プロパティ**」 タブをもう一度開きます。「**電子メール メッセージ マーケティング**」 を、このラボの「勧誘メールの作成」セクションで作成したメッセージの名前に設定します。  
1. ここまでは、「**デザイナー**」 タブで作業を行ってきました。ここで 「**全般**」 タブに移動し、体験に名前を付けて実行スケジュールを設定します。次の設定を行います。
 - **名前:** 顧客体験に名前を入力して、後で簡単に判別できるようにします。この名前は内部の関係者用です。
 - **開始日時:** 体験が連絡先とのやりとりを開始する時刻を入力します。フィールドを選択すると、推奨のデフォルト時刻が表示されます。
 - **終了日時:** 体験が連絡先とのやりとりを停止する時刻を入力します。一部の連絡先がまだ体験の途中であっても、この時点ですべてのアクションを停止します。テストを行うだけなら、2 週間かけます。
 - **タイム ゾーン:** ローカル タイム ゾーンを選択します (必要な場合)。ページ上の他の日付と時刻は、このゾーンに関連して表示されます。 
 - **コンテンツ設定:** インスタンスの既定のコンテンツ設定レコードに、すでに設定されている必要があります。 
1. コマンド バーで 「**保存**」 を選択し、これまでに行った作業を保存します。
1. 必要なコンテンツと設定がすべて含まれていることを確認するため、コマンド バーの 「**エラーの確認**」 を選択します。**Dynamics 365 Marketing** で検査され、結果が表示されます。エラーが見つかった場合は、ウィンドウの上部にメッセージが表示され、問題の場所を示すさまざまなインジケータが表示されます。たとえば、タイルの 1 つが正しく構成されていない場合、関連するタイルの上にエラー数が表示され、タイルを選択して 「プロパティ」 タブを開くと、エラーの詳細を確認できます。
1. この手順に従えば、メール メッセージがライブの場合、エラー チェックに合格するはずです。表示されない場合は、エラー メッセージを読み、報告された問題を修正し、エラーチェック結果に成功するまで繰り返してください。
1. これで実行の準備が整いました。実行を開始するには、コマンド バーで **「Go Live」** を選択して発行します。
1. Dynamics 365 Marketing は、取引先担当者の処理、アクションの実行、および設定した実行時間中の結果の収集を行う体験を、電子メール マーケティング サービスにコピーします。体験の 「**ステータス理由**」 が 「ライブ」 に更新されます。
1. メッセージが送信されるまでに数分かかる場合があるため、メッセージが受信トレイに届くまでに時間がかかります。その後、メッセージを開き、画像を読み込みます。Dynamics 365 Marketing に戻って、体験の進み具合を確認できます。「**デザイナー**」 タブに、パイプラインの各タイルの情報と結果が表示されるようになりました。「**インサイト**」 タブを開いて、詳細な分析を表示します。


